<%- include('header') %>

    <div class="container mt-4">
        <h2 class="text-primary mb-3">Quản lý lớp</h2>
        <%- include('nav') %>
            <form action="/lop" method="GET" class="d-flex mb-3">
                <input type="text" name="q" class="form-control me-2" placeholder="Tìm tên lớp..."
                    value="<%= typeof q !== 'undefined' ? q : '' %>">
                <button type="submit" class="btn btn-primary">Tìm</button>
            </form>

            <a href="/lop/them" class="btn btn-success mb-3">+ Thêm Lớp</a>

            <table class="table table-bordered table-hover">
                <thead class="table-light">
                    <tr>
                        <th>STT</th>
                        <th>Tên lớp</th>
                        <th>Thuộc khoa</th>
                        <th>Thuộc ngành</th>
                        <th>Khoá học</th>
                        <th>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    <% lops.forEach((lop, index)=> { %>
                        <tr>
                            <td>
                                <%= index + 1 %>
                            </td>
                            <td>
                                <%= lop.tenLop %>
                            </td>
                            <td>
                                <%= lop.khoa.tenKhoa %>
                            </td>
                            <td>
                                <%= lop.nganh ? lop.nganh.tenNganh : '—' %>
                            </td>

                            <td>
                                <%= lop.khoaHoc ? lop.khoaHoc.tenKhoaHoc : '—' %>
                            </td>
                            <td>
                                <a href="/lop/sua/<%= lop._id %>" class="btn btn-warning btn-sm">Sửa</a>
                                <a href="/lop/xoa/<%= lop._id %>" class="btn btn-danger btn-sm"
                                    onclick="return confirm('Bạn chắc chắn muốn xoá?')">Xoá</a>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>
    </div>
    <%- include('footer') %>